# PROMPT DEEPSEARCH OPUS ‚Äî EXTRACTION EXHAUSTIVE & ULTRA-PROFESSIONNELLE

**MISSION CRITIQUE** : Produire un JSON exhaustif et ultra-pr√©cis avec extraction syst√©matique et v√©rification m√©thodique de CHAQUE √©l√©ment mentionn√© dans le document DEEPSEARCH.

## üéØ PROTOCOLE D'EXTRACTION EXHAUSTIVE ‚Äî OBLIGATOIRE

### ‚ö†Ô∏è R√àGLE ABSOLUE : TRIPLE LECTURE SYST√âMATIQUE
1. **LECTURE 1 - BALAYAGE** : Identifier TOUS les √©l√©ments par dimension (faire une liste mentale)
2. **LECTURE 2 - EXTRACTION** : Extraire chaque √©l√©ment avec sources pr√©cises  
3. **LECTURE 3 - V√âRIFICATION** : Contr√¥ler exhaustivit√© et compter les √©l√©ments extraits

### üîç ESP√àCES CARACT√âRISTIQUES ‚Äî EXTRACTION ULTRA-RIGOUREUSE
**PROTOCOLE OBLIGATOIRE :**
- **Scanner m√©thodiquement** : noms scientifiques, noms communs, mentions indirectes, r√©f√©rences crois√©es
- **Cat√©gories √† v√©rifier** : poissons, invert√©br√©s, v√©g√©tation aquatique, oiseaux, mammif√®res, amphibiens, autres
- **V√©rifier contextes** : pr√©sence/absence, abondance, statut de conservation, habitats, migrations
- **Sources obligatoires** : Pour CHAQUE esp√®ce ‚Üí source(s) pr√©cise(s) avec r√©f√©rence exacte
- **CONTR√îLE QUALIT√â** : Si moins de 5 esp√®ces extraites ‚Üí RELIRE imp√©rativement le document

### üèóÔ∏è EMPREINTES HUMAINES ‚Äî INVENTAIRE SYST√âMATIQUE  
**BALAYER EXHAUSTIVEMENT :**
- **Infrastructures hydrauliques** : barrages, seuils, √©cluses, digues, canaux, retenues
- **R√©seaux techniques** : assainissement, AEP, pluvial, irrigation, drainage
- **√âquipements industriels** : stations d'√©puration, pompages, usines de traitement
- **Activit√©s anthropiques** : extractions, industries, rejets, am√©nagements
- **Urbanisation** : ports, quais, ponts, routes, zones artificialis√©es
- **Quantifier si possible** : surfaces, d√©bits, populations concern√©es

### üó£Ô∏è VOCABULAIRE LOCAL ‚Äî FOUILLE LINGUISTIQUE COMPL√àTE
**EXTRAIRE SYST√âMATIQUEMENT :**
- **Toponymie** : noms locaux de lieux-dits, cours d'eau, zones remarquables  
- **Dialecte territorial** : expressions, termes techniques locaux, patois
- **Savoirs empiriques** : dictons m√©t√©o, observations traditionnelles
- **Unit√©s traditionnelles** : mesures anciennes, r√©f√©rences temporelles locales
- **Pratiques nomm√©es** : techniques artisanales, usages patrimoniaux

### üå± LEVIERS AGRO√âCOLOGIQUES ‚Äî ANALYSE TECHNIQUE FINE
**IDENTIFIER PR√âCIS√âMENT :**
- **Syst√®mes de culture** : rotations, associations, couverts v√©g√©taux
- **Pratiques innovantes** : agroforesterie, permaculture, agriculture de conservation
- **Races et vari√©t√©s** : esp√®ces locales, semences paysannes, mat√©riel g√©n√©tique
- **Infrastructures agro√©cologiques** : haies, mares, bandes enherb√©es, corridors
- **Certifications** : bio, labels, d√©marches qualit√© territoriales

### üöÄ NOUVELLES ACTIVIT√âS ‚Äî INNOVATION & PROSPECTIVE
**SCANNER POUR :**
- **√âconomie verte √©mergente** : √©cotourisme, circuits courts, services √©cosyst√©miques
- **Projets pilotes** : exp√©rimentations, d√©monstrateurs, projets de recherche
- **√âconomie circulaire** : recyclage, valorisation, symbioses industrielles
- **Formations/m√©tiers** : nouvelles comp√©tences, emplois verts, reconversions
- **Initiatives locales** : coop√©ratives, associations, entreprises innovantes

### üîß TECHNODIVERSIT√â ‚Äî VEILLE TECHNOLOGIQUE COMPL√àTE
**R√âPERTORIER :**
- **EnR et efficacit√©** : solaire, √©olien, hydraulique, biomasse, g√©othermie
- **Innovations territoriales** : brevets locaux, solutions adapt√©es, R&D
- **Technologies num√©riques** : IoT environnemental, capteurs, mod√©lisation, IA
- **√âquipements sp√©cialis√©s** : mat√©riel de mesure, outils de gestion innovants
- **Partenariats R&D** : universit√©s, centres techniques, collaborations

## ‚úÖ CONTR√îLES QUALIT√â OBLIGATOIRES

### üö® SEUILS D'ALERTE (RELIRE SI NON ATTEINTS)
- **Esp√®ces** : < 5 esp√®ces ‚Üí Document sous-exploit√©, RELIRE
- **Infrastructures** : < 3 √©l√©ments ‚Üí Am√©nagements oubli√©s, RELIRE  
- **Vocabulaire** : < 3 termes ‚Üí Patrimoine linguistique manqu√©, RELIRE
- **Activit√©s nouvelles** : 0 √©l√©ment ‚Üí Innovation sous-d√©tect√©e, RELIRE
- **Technologies** : < 2 √©l√©ments ‚Üí Veille technologique incompl√®te, RELIRE

### üîÑ VALIDATION CROIS√âE
1. **Coh√©rence g√©ographique** : Couvrir tout le territoire d'√©tude
2. **Exhaustivit√© temporelle** : Int√©grer toute la p√©riode 2022-2025  
3. **Sources compl√®tes** : Chaque √©l√©ment ‚Üí minimum 1 source valide
4. **D√©duplication** : √âviter doublons entre dimensions
5. **Tra√ßabilit√©** : Chaque donn√©e ‚Üí r√©f√©rence pr√©cise dans le document

---

INSTRUCTIONS CRITIQUES (√† ex√©cuter AVANT d'√©mettre la sortie):
1) Normalisation des caract√®res
- Remplacer toute s√©quence √©chapp√©e issue de Markdown par le caract√®re brut:
  \_ ‚Üí _  |  \[ ‚Üí [  |  \] ‚Üí ]  |  \( ‚Üí (  |  \) ‚Üí )  |  \~ ‚Üí ~
- Ne pas √©chapper les ponctuations ou symboles Unicode (‚Äì ‚Äî ¬´ ¬ª ‚âà ‚â• ‚â§ ¬∞ ‚Ä¶). JSON supporte l'Unicode.

2) URLs ‚Äì Conversion obligatoire
- Si une URL est fournie en format Markdown [texte](url), garder uniquement l'URL simple: "https://‚Ä¶".
- Si aucune URL n'est disponible, mettre null.
- Interdit: crochets, parenth√®ses ou backslashes dans les URLs.

3) Cl√©s et structure ‚Äì Canonique et sans accents
- Utiliser strictement ces cl√©s snake_case (sans backslashes):
  dimensions.contexte_hydrologique, dimensions.especes_caracteristiques, dimensions.vocabulaire_local,
  dimensions.empreintes_humaines, dimensions.leviers_agroecologiques, dimensions.nouvelles_activites,
  dimensions.technodiversite, dimensions.projection_2035_2045 (optionnel),
  fables, sources
- Les sous‚Äëcl√©s attendues sont d√©finies ci‚Äëdessous dans le sch√©ma. N'ajoutez aucune autre cl√©.
- MAPPING AUTOMATIQUE: Si vous avez du contenu "infrastructures_techniques", utilisez la cl√© "empreintes_humaines"
- MAPPING AUTOMATIQUE: Si vous avez du contenu "agroecologie", r√©partissez-le entre "leviers_agroecologiques" (pratiques, cultures, √©levage, biodiversit√©) et "nouvelles_activites" (activit√©s √† d√©velopper)

4) Sources et r√©f√©rences
- Chaque source_ids doit r√©f√©rencer un id pr√©sent dans sources (ex: "S00", "S01", ‚Ä¶, pattern ^S\d+$).
- Si une source est r√©f√©renc√©e mais absente, l'AJOUTER dans sources avec valeurs minimales s√ªres:
  {"id":"Sxx","titre":"Source √† compl√©ter","url":null,"type":"web","date_acces":"YYYY-MM-DD","fiabilite":null}
- D√©dupliquer toutes les occurrences dans source_ids et dans sources par id.
- V√©rifier que date_acces est au format ISO AAAA-MM-JJ, sinon corriger.

5) Valeurs manquantes et types
- Utiliser null pour une valeur absente (ex: debit_moyen), [] pour une liste vide; pas de cha√Ænes vides "".
- Conserver les champs textuels avec accents et unit√©s dans des cha√Ænes (ex: "2‚Äì6 m").
- Interdit: valeurs NaN/Infinity, commentaires, trailing commas.

6) M√©tadonn√©es
- NE PAS inclure de bloc metadata. Il sera g√©r√© c√¥t√© serveur. Pas d'ai_model, validation_level, scores, etc.

7) Exhaustivit√© minimale et auto‚Äër√©paration
- Si une section requise manque, la CR√âER avec une structure vide/valide.
- Si un √©l√©ment individuel est invalide et non corrigeable, le SUPPRIMER plut√¥t que produire un JSON invalide.

8) Sortie
- Sortie UNIQUE: le JSON final seulement, sans texte d'intro, sans balises de code, sans commentaires.
- Le JSON doit passer JSON.parse strictement.

SCH√âMA CONTRACTUEL (JSON Schema simplifi√© ‚Äì √† respecter et valider en interne, ne pas inclure dans la sortie):
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "required": ["dimensions", "fables", "sources"],
  "properties": {
    "dimensions": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "contexte_hydrologique",
        "especes_caracteristiques",
        "vocabulaire_local",
        "empreintes_humaines",
        "leviers_agroecologiques",
        "nouvelles_activites",
        "technodiversite"
      ],
      "properties": {
        "contexte_hydrologique": {
          "type": "object",
          "additionalProperties": false,
          "required": ["description", "donnees"],
          "properties": {
            "description": {"type": "string"},
            "donnees": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "bassin_versant","debit_moyen","regime_hydrologique","qualite_eau",
                "indicateurs_quantitatifs","observations_2022_2025",
                "drivers_prospectifs_2035_2045","impacts_anticipes","sources"
              ],
              "properties": {
                "bassin_versant": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["intitule", "source_ids"],
                  "properties": {
                    "intitule": {"type": "string"},
                    "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
                  }
                },
                "debit_moyen": {"type": ["string", "null"]},
                "regime_hydrologique": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["intitule", "source_ids"],
                  "properties": {
                    "intitule": {"type": "string"},
                    "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
                  }
                },
                "qualite_eau": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["resume", "source_ids"],
                  "properties": {
                    "resume": {"type": "string"},
                    "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
                  }
                },
                "indicateurs_quantitatifs": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["nom", "valeur", "source_ids"],
                    "properties": {
                      "nom": {"type": "string"},
                      "valeur": {"type": "string"},
                      "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
                    }
                  }
                },
                "observations_2022_2025": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["fait", "source_ids"],
                    "properties": {
                      "fait": {"type": "string"},
                      "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
                    }
                  }
                },
                "drivers_prospectifs_2035_2045": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["nom", "description", "source_ids"],
                    "properties": {
                      "nom": {"type": "string"},
                      "description": {"type": "string"},
                      "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
                    }
                  }
                },
                "impacts_anticipes": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["nom", "description", "source_ids"],
                    "properties": {
                      "nom": {"type": "string"},
                      "description": {"type": "string"},
                      "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
                    }
                  }
                },
                "sources": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["titre", "url", "type", "date_acces", "fiabilite", "id"],
                    "properties": {
                      "titre": {"type": "string"},
                      "url": {"type": ["string", "null"], "pattern": "^https?://.*$"},
                      "type": {"type": "string", "enum": ["web","document_interne","institutionnel","presse","association","entreprise","projet","evenement"]},
                      "date_acces": {"type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$"},
                      "fiabilite": {"type": ["number","null"]},
                      "id": {"type": "string", "pattern": "^S\\d+$"},
                      "note": {"type": ["string","null"]}
                    }
                  }
                }
              }
            }
          }
        },
        "especes_caracteristiques": {
          "type": "object",
          "additionalProperties": false,
          "required": ["description", "donnees"],
          "properties": {
            "description": {"type": "string"},
            "donnees": {
              "type": "object",
              "additionalProperties": false,
              "required": ["poissons","invertebres","vegetation_aquatique","oiseaux_aquatiques","sources"],
              "properties": {
                "poissons": {"type": "array", "items": {"$ref": "#/definitions/especeItem"}},
                "invertebres": {"type": "array", "items": {"$ref": "#/definitions/especeItem"}},
                "vegetation_aquatique": {"type": "array", "items": {"$ref": "#/definitions/especeItem"}},
                "oiseaux_aquatiques": {"type": "array", "items": {"$ref": "#/definitions/especeItem"}},
                "sources": {"type": "array", "items": {"$ref": "#/definitions/sourceObj"}}
              }
            }
          }
        },
        "vocabulaire_local": {
          "type": "object",
          "additionalProperties": false,
          "required": ["description", "donnees"],
          "properties": {
            "description": {"type": "string"},
            "donnees": {
              "type": "object",
              "additionalProperties": false,
              "required": ["termes", "termes_locaux", "sources"],
              "properties": {
                "termes": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["terme","definition","exemple","source_ids"],
                    "properties": {
                      "terme": {"type": "string"},
                      "definition": {"type": "string"},
                      "exemple": {"type": "string"},
                      "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
                    }
                  }
                },
                "termes_locaux": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["cours_eau","phenomenes","pratiques"],
                  "properties": {
                    "cours_eau": {"type": ["string","null"]},
                    "phenomenes": {"type": "array", "items": {"type": "string"}},
                    "pratiques": {"type": "array", "items": {"type": "string"}}
                  }
                },
                "sources": {"type": "array", "items": {"$ref": "#/definitions/sourceObj"}}
              }
            }
          }
        },
        "empreintes_humaines": {
          "type": "object",
          "additionalProperties": false,
          "required": ["description","donnees"],
          "properties": {
            "description": {"type": "string"},
            "donnees": {
              "type": "object",
              "additionalProperties": false,
              "required": ["ouvrages_hydrauliques","reseaux","equipements","complexes_industriels","sources"],
              "properties": {
                "ouvrages_hydrauliques": {"type": "array", "items": {"$ref": "#/definitions/elementDesc"}},
                "reseaux": {"type": "array", "items": {"$ref": "#/definitions/elementDesc"}},
                "equipements": {"type": "array", "items": {"$ref": "#/definitions/elementDesc"}},
                "complexes_industriels": {"type": "array", "items": {"$ref": "#/definitions/elementDesc"}},
                "sources": {"type": "array", "items": {"$ref": "#/definitions/sourceObj"}}
              }
            }
          }
        },
        "leviers_agroecologiques": {
          "type": "object",
          "additionalProperties": false,
          "required": ["description","donnees"],
          "properties": {
            "description": {"type": "string"},
            "donnees": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "pratiques_agricoles","cultures","elevage","biodiversite_cultivee",
                "leviers_agroecologiques","sources"
              ],
              "properties": {
                "pratiques_agricoles": {"type": "array", "items": {"$ref": "#/definitions/elementDesc"}},
                "cultures": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["nom","source_ids"],
                    "properties": {
                      "nom": {"type": "string"},
                      "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
                    }
                  }
                },
                "elevage": {"type": "array", "items": {"$ref": "#/definitions/elementDesc"}},
                "biodiversite_cultivee": {"type": "array", "items": {"$ref": "#/definitions/elementDesc"}},
                "leviers_agroecologiques": {"type": "array", "items": {"$ref": "#/definitions/elementNameOnly"}},
                "sources": {"type": "array", "items": {"$ref": "#/definitions/sourceObj"}}
              }
            }
          }
        },
        "nouvelles_activites": {
          "type": "object",
          "additionalProperties": false,
          "required": ["description","donnees"],
          "properties": {
            "description": {"type": "string"},
            "donnees": {
              "type": "object",
              "additionalProperties": false,
              "required": ["activites_a_developper","sources"],
              "properties": {
                "activites_a_developper": {"type": "array", "items": {"$ref": "#/definitions/elementNameOnly"}},
                "sources": {"type": "array", "items": {"$ref": "#/definitions/sourceObj"}}
              }
            }
          }
        },
        "technodiversite": {
          "type": "object",
          "additionalProperties": false,
          "required": ["description","donnees"],
          "properties": {
            "description": {"type": "string"},
            "donnees": {
              "type": "object",
              "additionalProperties": false,
              "required": ["technologies_vertes","innovations_locales","numerique","recherche_developpement","sources"],
              "properties": {
                "technologies_vertes": {"type": "array", "items": {"$ref": "#/definitions/elementNameOnly"}},
                "innovations_locales": {"type": "array", "items": {"$ref": "#/definitions/elementNameOnly"}},
                "numerique": {"type": "array", "items": {"$ref": "#/definitions/elementNameOnly"}},
                "recherche_developpement": {"type": "array", "items": {"$ref": "#/definitions/elementNameOnly"}},
                "sources": {"type": "array", "items": {"$ref": "#/definitions/sourceObj"}}
              }
            }
          }
        }
      }
    },
    "fables": {"type": "array", "items": {"type": "object"}},
    "sources": {
      "type": "array",
      "items": {"$ref": "#/definitions/sourceObj"}
    }
  },
  "definitions": {
    "sourceObj": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id","titre","url","type","date_acces","fiabilite"],
      "properties": {
        "id": {"type": "string", "pattern": "^S\\d+$"},
        "titre": {"type": "string"},
        "url": {"type": ["string","null"], "pattern": "^https?://.*$"},
        "type": {"type": "string", "enum": ["web","document_interne","institutionnel","presse","association","entreprise","projet","evenement"]},
        "date_acces": {"type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$"},
        "fiabilite": {"type": ["number","null"]},
        "note": {"type": ["string","null"]}
      }
    },
    "especeItem": {
      "type": "object",
      "additionalProperties": false,
      "required": ["nom_commun","nom_scientifique","statut","source_ids"],
      "properties": {
        "nom_commun": {"type": "string"},
        "nom_scientifique": {"type": ["string","null"]},
        "statut": {"type": ["string","null"]},
        "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
      }
    },
    "elementDesc": {
      "type": "object",
      "additionalProperties": false,
      "required": ["nom","description","source_ids"],
      "properties": {
        "nom": {"type": "string"},
        "description": {"type": "string"},
        "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
      }
    },
    "elementNameOnly": {
      "type": "object",
      "additionalProperties": false,
      "required": ["nom","source_ids"],
      "properties": {
        "nom": {"type": "string"},
        "source_ids": {"type": "array", "items": {"type": "string", "pattern": "^S\\d+$"}}
      }
    }
  }
}

EXEMPLE DE G√âN√âRATION (structure seulement ‚Äì √Ä ADAPTER AU CONTENU, NE PAS INCLURE CETTE SECTION DANS LA SORTIE):
{
  "dimensions": {
    "contexte_hydrologique": {
      "description": "‚Ä¶",
      "donnees": {
        "bassin_versant": {"intitule": "‚Ä¶", "source_ids": ["S00","S02"]},
        "debit_moyen": null,
        "regime_hydrologique": {"intitule": "‚Ä¶", "source_ids": ["S00"]},
        "qualite_eau": {"resume": "‚Ä¶", "source_ids": ["S00","S04"]},
        "indicateurs_quantitatifs": [
          {"nom": "‚Ä¶", "valeur": "‚Ä¶", "source_ids": ["S00"]}
        ],
        "observations_2022_2025": [
          {"fait": "‚Ä¶", "source_ids": ["S00"]}
        ],
        "drivers_prospectifs_2035_2045": [
          {"nom": "‚Ä¶", "description": "‚Ä¶", "source_ids": ["S00"]}
        ],
        "impacts_anticipes": [
          {"nom": "‚Ä¶", "description": "‚Ä¶", "source_ids": ["S00"]}
        ],
        "sources": []
      }
    },
    "especes_caracteristiques": {"description": "‚Ä¶", "donnees": {"poissons": [], "invertebres": [], "vegetation_aquatique": [], "oiseaux_aquatiques": [], "sources": []}},
    "vocabulaire_local": {"description": "‚Ä¶", "donnees": {"termes": [], "termes_locaux": {"cours_eau": null, "phenomenes": [], "pratiques": []}, "sources": []}},
    "empreintes_humaines": {"description": "‚Ä¶", "donnees": {"ouvrages_hydrauliques": [], "reseaux": [], "equipements": [], "complexes_industriels": [], "sources": []}},
    "leviers_agroecologiques": {"description": "‚Ä¶", "donnees": {"pratiques_agricoles": [], "cultures": [], "elevage": [], "biodiversite_cultivee": [], "leviers_agroecologiques": [], "sources": []}},
    "nouvelles_activites": {"description": "‚Ä¶", "donnees": {"activites_a_developper": [], "sources": []}},
    "technodiversite": {"description": "‚Ä¶", "donnees": {"technologies_vertes": [], "innovations_locales": [], "numerique": [], "recherche_developpement": [], "sources": []}}
  },
  "fables": [],
  "sources": [
    {"id":"S00","titre":"‚Ä¶","url":"https://‚Ä¶","type":"web","date_acces":"2025-01-07","fiabilite":80}
  ]
}

G√âN√âRATION FINALE :
- Appliquer les 8 r√®gles de normalisation/validation ci-dessus.
- Valider en interne le JSON contre le sch√©ma; corriger/compl√©ter si n√©cessaire.
- √âmettre UNIQUEMENT le JSON final conforme (aucun texte, aucune m√©tadonn√©e, aucun code fence).